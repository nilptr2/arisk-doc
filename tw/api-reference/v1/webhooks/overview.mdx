---
title: "概覽與安全驗證"
description: "瞭解 Arisk Webhook 的基本原理以及如何驗證推送訊息的安全性。"
---

Arisk 透過 Webhook 向您配置的伺服器傳送實時 HTTP POST 請求，通知監控地址的風險變動或風險交易。

## 安全性驗證

為確保訊息來源的真實性和完整性，Arisk 傳送的每個 Webhook 請求都包含數字簽名。我們強烈建議您在處理請求前進行驗證。

### HTTP 請求頭

每個 Webhook 請求都會包含以下關鍵 Header：

| Header | 說明 | 示例 |
| :--- | :--- | :--- |
| **X-Arisk-Signature** | RSA-PSS 數字簽名（Base64 編碼） | `aGVsbG8gd29ybGQ=...` |
| **Authorization** | Bearer Token（僅在配置了 `auth_key` 時存在） | `Bearer your-secret-token` |

### 驗證步驟

1.  **驗證簽名（必須）**
    *   **演算法**: RSA-PSS with SHA-256
    *   **簽名內容**: 請求 Body 的原始 JSON 字串
    *   **公鑰**: 使用下方的 Arisk RSA 公鑰驗證 `X-Arisk-Signature` 中的簽名。

<CodeGroup>
```text 公鑰 (PEM)
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAy4SlJTdScP1YAtUqJ1Kz
vB7isAMYd5oeAUqtraQ2UeLTz8EnPAVgob88NwxnXENd/GWkzas18bjkEbZuPcYA
P+6cG5l077/zO8WCgUe+NheJUMYdLinvNovXB4oaPZ9EOSUPARyhupH+E5+Kr2Te
nn+q0wsq62ge6oo705FpJSePbtAQLUnpQYe9GDty50nuXTZ3dZgIMpFkgPI49viY
R0R72kC0l28BH/Ea9WxibKQuVngVMoK7/kLHNV93AEX5Rk1tUX+W/iKurhwxN1ei
1N9rBj0d6fupntF8RgDL7vhMa6JtZEnhscTvGZH8bPa2LXMsXVxTdeSZL9+ElFxK
awIDAQAB
-----END PUBLIC KEY-----
```
</CodeGroup>

2.  **驗證 Authorization（可選）**
    如果您在 Webhook 配置中設定了 `auth_key`，Arisk 會在 Header 中新增：
    `Authorization: Bearer <您的 auth_key>`

---

## 最佳實踐

- **快速響應**：您的伺服器應在接收到通知後立即返回 `200 OK`，避免因邏輯耗時導致連線超時。
- **冪等處理**：由於網路原因，可能會收到重複的通知，請進行冪等檢查。
- **非同步處理**：建議在返回 HTTP 響應後，再非同步處理後續業務邏輯。
